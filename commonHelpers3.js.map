{"version":3,"file":"commonHelpers3.js","sources":["../src/js/3-reviews.js"],"sourcesContent":["import Swiper from 'swiper/bundle';\n// import styles bundle\nimport 'swiper/css/bundle';\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nimport * as basicLightbox from 'basiclightbox';\n\n// ======VARIABLE========\n\nconst API = 'https://portfolio-js.b.goit.study/api';\n\n// ======FUNCTIONS======\n\n// ------swiper------\n\nconst slipper = new Swiper('.swiper', {\n  breakpoints: {\n    1280: {\n      slidesPerView: 2,\n      spaceBetween: 32,\n    },\n    768: {\n      slidesPerView: 1,\n      spaceBetween: 24,\n    },\n    360: {\n      slidesPerView: 1,\n      spaceBetween: 16,\n    },\n  },\n\n  updateOnWindowResize: true,\n\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n\n  keyboard: {\n    enabled: true,\n    onlyInViewport: false,\n  },\n  mousewheel: {\n    invert: true,\n  },\n  simulateTouch: true,\n  allowTouchMove: true,\n});\n\n//  ------HTTP request-------\n\nconst fetchReviews = async () => {\n  try {\n    const response = await axios.get(`${API}/reviews`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    iziToast.show({\n      title: 'Hey',\n      message: `${error}, for details look console.log`,\n      color: 'red',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n  //   const response = await axios.get(`${API}/reviews`);\n  //   console.log(response.data);\n  //   return response.data;\n};\n\nslipper.on('reachEnd', () => {\n  iziToast.show({\n    title: 'Hey',\n    message: 'It is end',\n    color: '#e4e5e6',\n    position: 'topRight',\n    timeout: 1500,\n  });\n});\n\n//  -----create HTML ---------\n\nconst createHtml =  users => {\n  try {\n    // const { review, avatar_url,author } = users;\n    const revievHtml =  users.reduce((acc, { review, avatar_url,author } , index) => {\n        \n        \n      return (acc += `<li class=\"swiper-slide\">  \n                            <div class=\"item-container\">\n                               <p class=\"text-review\">${review}</p>\n                           <div class=\"icon-photo-name\">\n                               <img src=${avatar_url} alt=\"natalia\" width=\"40\" height=\"40\"\n                                   class=\"avatar-icon\" />\n                               <p class=\"user-name-review\">${author}</p>\n                           </div>\n                           </div>\n                           </li>`);\n    }, '');\n\n    return revievHtml;\n  } catch (error) {\n    console.log(error);\n    // console.log(error.message);\n    \n    iziToast.show({\n        title: 'Hey',\n        message: `${error}, for details look console.log`,\n        color: 'red',\n        position: 'topRight',\n        timeout: 5000,\n      });\n\n    return `<li class=\"swiper-slide\">  \n                <div class=\"item-container\">\n                    <p class=\"text-review\"> No reveiws uploaded.</p> <p class=\"text-review\"> Mistake ${error},for details look at console.log</p>          \n                </div>\n            </li>\n            <li class=\"swiper-slide\">  \n                <div class=\"item-container\">\n                    <p class=\"text-review\">No reveiws uploaded look at the mistakes</p> \n                </div>\n            </li>`;\n  }\n};\n\n//-----Modal window------\n\nconst createModalWindow = tag => {\n  const reviewMessage = document.querySelectorAll('.text-review');\n  const reviewAuthor = document.querySelectorAll('.user-name-review');\n  const reviewAwatar = document.querySelectorAll('.avatar-icon');\n  console.log(reviewMessage);\n  reviewMessage.forEach((value, index) => {\n    console.log(value);\n    value.addEventListener('click', () => {\n      const instance = basicLightbox.create(\n        `<div class=\"backdrop\">\n                <div class=\"modal\">\n                <button type=\"button\" class=\"modal-btn-close\">\n                <svg class=\"icon-btn-close\" width=\"16\" height=\"16\">\n                    <use href=\"./img/icons.svg#close-btn-modal-icon\"></use>\n                </svg>\n                </button>\n                     <p class=\"modal-text-review\">${value.innerHTML}</p>\n                     <div class=\"modal-icon-photo-name icon-photo-name\">\n                     <img src=${reviewAwatar[index].src} alt=\"natalia\" width=\"40\" height=\"40\"\n                         class=\"modal-avatar-icon avatar-icon\" />\n                     <p class=\"modal-user-name-review user-name-review\">${reviewAuthor[index].innerHTML}</p>\n                 </div>\n                    \n                </div>\n        </div>`,\n\n        {\n          onShow: instance => {\n            instance.element().querySelector('.modal-btn-close').onclick =\n              instance.close;\n\n            instance.element().querySelector('.backdrop').onclick = event => {\n              if (event.target.classList.value === 'backdrop') {\n                instance.close();\n              }\n            };\n\n            document.onkeydown = event => {\n              if (event.key === 'Escape') {\n                instance.close();\n              }\n            };\n          },\n        }\n      );\n      instance.show();\n    });\n  });\n};\n\n//--------Data Processing------\n\nconst doStuff = async () => {\n  try {\n    const users = await fetchReviews();\n    console.log(users);\n\n    document.querySelector('.swiper-wrapper').innerHTML = '';\n    document.querySelector('.swiper-wrapper').innerHTML = createHtml(users);\n    slipper.update();\n\n    createModalWindow('.text-review');\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst usr = doStuff();\n"],"names":["API","slipper","Swiper","fetchReviews","response","axios","error","iziToast","createHtml","users","acc","review","avatar_url","author","index","createModalWindow","tag","reviewMessage","reviewAuthor","reviewAwatar","value","basicLightbox.create","instance","event","doStuff"],"mappings":"yHAcA,MAAMA,EAAM,wCAMNC,EAAU,IAAIC,EAAO,UAAW,CACpC,YAAa,CACX,KAAM,CACJ,cAAe,EACf,aAAc,EACf,EACD,IAAK,CACH,cAAe,EACf,aAAc,EACf,EACD,IAAK,CACH,cAAe,EACf,aAAc,EACf,CACF,EAED,qBAAsB,GAEtB,WAAY,CACV,OAAQ,sBACR,OAAQ,qBACT,EAED,SAAU,CACR,QAAS,GACT,eAAgB,EACjB,EACD,WAAY,CACV,OAAQ,EACT,EACD,cAAe,GACf,eAAgB,EAClB,CAAC,EAIKC,EAAe,SAAY,CAC/B,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,GAAGL,CAAG,UAAU,EACjD,eAAQ,IAAII,EAAS,IAAI,EAClBA,EAAS,IACjB,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBC,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,GAAGD,CAAK,iCACjB,MAAO,MACP,SAAU,WACV,QAAS,GACf,CAAK,CACF,CAIH,EAEAL,EAAQ,GAAG,WAAY,IAAM,CAC3BM,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,YACT,MAAO,UACP,SAAU,WACV,QAAS,IACb,CAAG,CACH,CAAC,EAID,MAAMC,EAAcC,GAAS,CAC3B,GAAI,CAiBF,OAfoBA,EAAM,OAAO,CAACC,EAAK,CAAE,OAAAC,EAAQ,WAAAC,EAAW,OAAAC,CAAQ,EAAGC,IAG7DJ,GAAO;AAAA;AAAA,wDAEmCC,CAAM;AAAA;AAAA,0CAEpBC,CAAU;AAAA;AAAA,6DAESC,CAAM;AAAA;AAAA;AAAA,kCAI5D,EAAE,CAGN,OAAQP,EAAO,CACd,eAAQ,IAAIA,CAAK,EAGjBC,EAAS,KAAK,CACV,MAAO,MACP,QAAS,GAAGD,CAAK,iCACjB,MAAO,MACP,SAAU,WACV,QAAS,GACjB,CAAO,EAEI;AAAA;AAAA,uGAE4FA,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQzG,CACH,EAIMS,EAAoBC,GAAO,CAC/B,MAAMC,EAAgB,SAAS,iBAAiB,cAAc,EACxDC,EAAe,SAAS,iBAAiB,mBAAmB,EAC5DC,EAAe,SAAS,iBAAiB,cAAc,EAC7D,QAAQ,IAAIF,CAAa,EACzBA,EAAc,QAAQ,CAACG,EAAON,IAAU,CACtC,QAAQ,IAAIM,CAAK,EACjBA,EAAM,iBAAiB,QAAS,IAAM,CACnBC,EAAoB,OACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAO4CD,EAAM,SAAS;AAAA;AAAA,gCAEnCD,EAAaL,CAAK,EAAE,GAAG;AAAA;AAAA,0EAEmBI,EAAaJ,CAAK,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA,gBAM/F,CACE,OAAQQ,GAAY,CAClBA,EAAS,QAAS,EAAC,cAAc,kBAAkB,EAAE,QACnDA,EAAS,MAEXA,EAAS,QAAO,EAAG,cAAc,WAAW,EAAE,QAAUC,GAAS,CAC3DA,EAAM,OAAO,UAAU,QAAU,YACnCD,EAAS,MAAK,CAE9B,EAEY,SAAS,UAAYC,GAAS,CACxBA,EAAM,MAAQ,UAChBD,EAAS,MAAK,CAE9B,CACW,CACF,CACT,EACe,KAAI,CACnB,CAAK,CACL,CAAG,CACH,EAIME,EAAU,SAAY,CAC1B,GAAI,CACF,MAAMf,EAAQ,MAAMN,IACpB,QAAQ,IAAIM,CAAK,EAEjB,SAAS,cAAc,iBAAiB,EAAE,UAAY,GACtD,SAAS,cAAc,iBAAiB,EAAE,UAAYD,EAAWC,CAAK,EACtER,EAAQ,OAAM,EAEdc,EAAkB,cAAc,CACjC,OAAQT,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEYkB,EAAO"}