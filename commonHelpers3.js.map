{"version":3,"file":"commonHelpers3.js","sources":["../src/js/3-reviews.js"],"sourcesContent":["import Swiper from 'swiper/bundle';\n// import styles bundle\nimport 'swiper/css/bundle';\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nimport * as basicLightbox from 'basiclightbox';\n\n// ======VARIABLE========\n\nconst API = 'https://portfolio-js.b.goit.study/api';\n\n\n// ======FUNCTIONS======\n\n// ------swiper------\nconst slipper = new Swiper('.swiper', {\n  breakpoints: {\n    1280: {\n      slidesPerView: 2,\n      spaceBetween: 32,\n    },\n    768: {\n      slidesPerView: 1,\n      spaceBetween: 24,\n    },\n    360: {\n      slidesPerView: 1,\n      spaceBetween: 16,\n    },\n  },\n\n  updateOnWindowResize: true,\n\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n\n  keyboard: {\n    enabled: true,\n    onlyInViewport: false,\n  },\n  mousewheel: {\n    invert: true,\n  },\n  simulateTouch: true,\n  allowTouchMove: true,\n \n});\n\n\n//  ------HTTP request-------\nconst fetchReviews = async () => {\n  const response = await axios.get(`${API}/reviews`);\n  return response.data;\n};\n\nslipper.on('reachEnd', () => {\n  iziToast.show({\n    title: 'Hey',\n    message: 'It is end',\n    color: '#92929c37',\n    position: 'topRight',\n    timeout: 1500,\n  });\n});\n\n\n//  -----create HTML ---------\nconst createHtml = users => {\n  const revievHtml = users.reduce((acc, item, index) => {\n    return (acc += `<li class=\"swiper-slide\">  \n                        <div class=\"item-container\">\n                           <p class=\"text-review\">${item.review}</p>\n                       <div class=\"icon-photo-name\">\n                           <img src=${item.avatar_url} alt=\"natalia\" width=\"40\" height=\"40\"\n                               class=\"avatar-icon\" />\n                           <p class=\"user-name-review\">${item.author}</p>\n                       </div>\n                       </div>\n                       </li>`);\n  }, '');\n\n  return revievHtml;\n};\n\n\n//-----Modal window------\n\nconst createModalWindow = tag => {\n  const reviewMessage = document.querySelectorAll('.text-review');\n  const reviewAuthor = document.querySelectorAll('.user-name-review');\n  const reviewAwatar = document.querySelectorAll('.avatar-icon');\n  console.log(reviewMessage);\n  reviewMessage.forEach((value, index) => {\n    console.log(value);\n    value.addEventListener('click', () => {\n      const instance = basicLightbox.create(\n        `<div class=\"backdrop\">\n                <div class=\"modal\">\n                <button type=\"button\" class=\"modal-btn-close\">\n                <svg class=\"icon-btn-close\" width=\"16\" height=\"16\">\n                    <use href=\"./img/icons.svg#close-btn-modal-icon\"></use>\n                </svg>\n                </button>\n                     <p class=\"modal-text-review\">${value.innerHTML}</p>\n                     <div class=\"modal-icon-photo-name icon-photo-name\">\n                     <img src=${reviewAwatar[index].src} alt=\"natalia\" width=\"40\" height=\"40\"\n                         class=\"modal-avatar-icon avatar-icon\" />\n                     <p class=\"modal-user-name-review user-name-review\">${reviewAuthor[index].innerHTML}</p>\n                 </div>\n                    \n                </div>\n        </div>`,\n\n        {\n          onShow: instance => {\n\n            instance.element().querySelector('.modal-btn-close').onclick =\n              instance.close;\n\n            instance.element().querySelector('.backdrop').onclick = event => {\n              if (event.target.classList.value === 'backdrop') {\n                instance.close();\n              }\n            };\n\n            document.onkeydown = event => {\n              if (event.key === 'Escape') {\n                instance.close();\n              }\n            };\n          },\n        }\n\n      );\n      instance.show();\n    });\n  });\n};\n\n\n//--------Data Processing------\n\nconst doStuff = async () => {\n  try {\n    const users = await fetchReviews();\n    console.log(users);\n\n    document.querySelector('.swiper-wrapper').innerHTML = '';\n    document.querySelector('.swiper-wrapper').innerHTML = createHtml(users);\n    slipper.update();\n\n    createModalWindow('.text-review');\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst usr = doStuff();\n\n"],"names":["API","slipper","Swiper","fetchReviews","axios","iziToast","createHtml","users","acc","item","index","createModalWindow","tag","reviewMessage","reviewAuthor","reviewAwatar","value","basicLightbox.create","instance","event","doStuff","error"],"mappings":"yHAcA,MAAMA,EAAM,wCAMNC,EAAU,IAAIC,EAAO,UAAW,CACpC,YAAa,CACX,KAAM,CACJ,cAAe,EACf,aAAc,EACf,EACD,IAAK,CACH,cAAe,EACf,aAAc,EACf,EACD,IAAK,CACH,cAAe,EACf,aAAc,EACf,CACF,EAED,qBAAsB,GAEtB,WAAY,CACV,OAAQ,sBACR,OAAQ,qBACT,EAED,SAAU,CACR,QAAS,GACT,eAAgB,EACjB,EACD,WAAY,CACV,OAAQ,EACT,EACD,cAAe,GACf,eAAgB,EAElB,CAAC,EAIKC,EAAe,UACF,MAAMC,EAAM,IAAI,GAAGJ,CAAG,UAAU,GACjC,KAGlBC,EAAQ,GAAG,WAAY,IAAM,CAC3BI,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,YACT,MAAO,YACP,SAAU,WACV,QAAS,IACb,CAAG,CACH,CAAC,EAID,MAAMC,EAAaC,GACEA,EAAM,OAAO,CAACC,EAAKC,EAAMC,IAClCF,GAAO;AAAA;AAAA,oDAEiCC,EAAK,MAAM;AAAA;AAAA,sCAEzBA,EAAK,UAAU;AAAA;AAAA,yDAEIA,EAAK,MAAM;AAAA;AAAA;AAAA,8BAI/D,EAAE,EAQDE,EAAoBC,GAAO,CAC/B,MAAMC,EAAgB,SAAS,iBAAiB,cAAc,EACxDC,EAAe,SAAS,iBAAiB,mBAAmB,EAC5DC,EAAe,SAAS,iBAAiB,cAAc,EAC7D,QAAQ,IAAIF,CAAa,EACzBA,EAAc,QAAQ,CAACG,EAAON,IAAU,CACtC,QAAQ,IAAIM,CAAK,EACjBA,EAAM,iBAAiB,QAAS,IAAM,CACnBC,EAAoB,OACnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAO4CD,EAAM,SAAS;AAAA;AAAA,gCAEnCD,EAAaL,CAAK,EAAE,GAAG;AAAA;AAAA,0EAEmBI,EAAaJ,CAAK,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA,gBAM/F,CACE,OAAQQ,GAAY,CAElBA,EAAS,QAAS,EAAC,cAAc,kBAAkB,EAAE,QACnDA,EAAS,MAEXA,EAAS,QAAO,EAAG,cAAc,WAAW,EAAE,QAAUC,GAAS,CAC3DA,EAAM,OAAO,UAAU,QAAU,YACnCD,EAAS,MAAK,CAE9B,EAEY,SAAS,UAAYC,GAAS,CACxBA,EAAM,MAAQ,UAChBD,EAAS,MAAK,CAE9B,CACW,CACF,CAET,EACe,KAAI,CACnB,CAAK,CACL,CAAG,CACH,EAKME,EAAU,SAAY,CAC1B,GAAI,CACF,MAAMb,EAAQ,MAAMJ,IACpB,QAAQ,IAAII,CAAK,EAEjB,SAAS,cAAc,iBAAiB,EAAE,UAAY,GACtD,SAAS,cAAc,iBAAiB,EAAE,UAAYD,EAAWC,CAAK,EACtEN,EAAQ,OAAM,EAEdU,EAAkB,cAAc,CACjC,OAAQU,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEYD,EAAO"}